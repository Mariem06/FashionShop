on: [push]
jobs:
  setup:
    runs-on: ubuntu-latest
    outputs:
      message: ${{ steps.split.outputs.json )}}
    steps:
      - uses: actions/checkout@v3
      - name: Récupérer le message de commit
        id: get_commit_message
        run: echo "::set-output name=commit_message::$(git log --format=%B -n 1 ${{ github.sha }})"  
      - name: Extract words from string
        id: split
        run: |
         my_string="Hello,world,how,are,you"
         words=(${my_string//,/ })
         json=$(jq -n --argjson arr '["${words[@]}"]' '{words: $arr}')
         echo "::set-output name=json::$json}"

      
  build:
    needs: [ setup ]
    runs-on: ubuntu-latest
    strategy:
      matrix:
        element: ${{ fromJson(needs.setup.outputs.message)words}}

    steps:
      - name: Get London Time   
        run: ${{ matrix.element }}
